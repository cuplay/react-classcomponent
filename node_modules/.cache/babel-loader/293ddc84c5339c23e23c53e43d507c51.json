{"ast":null,"code":"import \"antd/es/message/style/css\";\nimport _message from \"antd/es/message\";\nimport ajax from \"./ajax.jsx\";\nimport jsonp from \"jsonp\"; // 包含应用中所有接口请求函数的模块\n// 要求:能根据接口文档定义接口请求\n// 每个函数的返回值都是promise\n//登陆\n\nexport const reqLogin = (username, password) => ajax(\"/login\", {\n  username,\n  password\n}, \"POST\");\nexport const reqAddUser = user => ajax(\"/manage/user/add\", user, \"POST\");\n/* jsonp请求的接口请求函数 */\n\nexport const reqWeather = city => {\n  return new Promise((resolve, reject) => {\n    const url = `http://restapi.amap.com/v3/weather/weatherInfo?key=98c97d10c1fda37bdc5402d15c1cdd71&city=${city}`;\n    jsonp(url, {}, (err, data) => {\n      //   console.log(err, data);\n      if (!err && data.status === \"1\") {\n        const {\n          weather\n        } = data.lives[0];\n        resolve({\n          weather\n        });\n      } else {\n        _message.error(\"天气获取失败\");\n      }\n    });\n  });\n}; // 获取一级二级分类列表\n\nexport const reqCategorys = parentId => ajax(\"/manage/category/list\", {\n  parentId\n}); // reqWeather(\"北京\");\n\nexport const reqAddCategory = (categoryName, parentId) => ajax(\"/manage/category/add\", {\n  categoryName,\n  parentId\n}, \"post\");\nexport const reqUpdateCategory = (categoryId, categoryName) => ajax(\"/manage/category/update\", {\n  categoryId,\n  categoryName\n}, \"post\");\nexport const reqProducts = (pageNum, pageSize) => ajax(`http://120.55.193.14:5000/manage/product/list?pageNum=${pageNum}&pageSize=${pageSize}`);\n/* 搜索商品分页列表,或者根据商品描述，或者商品名称 */\n\nexport const reqProductsSearch = (pageNum, pageSize, searchName, searchType) => ajax('http://120.55.193.14:5000/manage/product/search', {\n  pageNum,\n  pageSize,\n  [searchType]: searchName\n});\n/* 获取一个分类 */\n\nexport const reqCategory = categoryId => ajax('http://120.55.193.14:5000/manage/category/info', {\n  categoryId\n});\n/* 更新商品的状态(上/下) */\n\nexport const reqUpdateStatus = (productId, status) => ajax('http://120.55.193.14:5000/manage/product/updateStatus', {\n  productId,\n  status\n}, 'post'); //添加商品\n\nexport const reqAddProduct = (categoryId, pCategoryId, name, price, desc) => ajax('http://120.55.193.14:5000//manage/product/add', {\n  categoryId,\n  pCategoryId,\n  name,\n  price,\n  desc\n}, 'post'); //删除指定名称的图片\n\nexport const reqDelImg = name => ajax('http://120.55.193.14:5000/manage/img/delete', {\n  name\n}, 'post'); //更新商品\n\nexport const reqUpdateProduct = (_id, categoryId, pCategoryId, name, price, desc) => ajax('http://120.55.193.14:5000//manage/product/update', {\n  categoryId,\n  pCategoryId,\n  name,\n  price,\n  desc,\n  _id\n}, 'post');","map":{"version":3,"sources":["D:/desk/尚硅谷React全栈项目【谷粒后台】教程/React-admin/src/api/index.js"],"names":["ajax","jsonp","reqLogin","username","password","reqAddUser","user","reqWeather","city","Promise","resolve","reject","url","err","data","status","weather","lives","error","reqCategorys","parentId","reqAddCategory","categoryName","reqUpdateCategory","categoryId","reqProducts","pageNum","pageSize","reqProductsSearch","searchName","searchType","reqCategory","reqUpdateStatus","productId","reqAddProduct","pCategoryId","name","price","desc","reqDelImg","reqUpdateProduct","_id"],"mappings":"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","sourcesContent":["// import json from jsonp\r\nimport { message } from \"antd\";\r\nimport ajax from \"./ajax.jsx\";\r\nimport jsonp from \"jsonp\";\r\n// 包含应用中所有接口请求函数的模块\r\n// 要求:能根据接口文档定义接口请求\r\n// 每个函数的返回值都是promise\r\n\r\n//登陆\r\n\r\nexport const reqLogin = (username, password) =>\r\n  ajax(\"/login\", { username, password }, \"POST\");\r\n\r\nexport const reqAddUser = (user) => ajax(\"/manage/user/add\", user, \"POST\");\r\n\r\n/* jsonp请求的接口请求函数 */\r\nexport const reqWeather = (city) => {\r\n  return new Promise((resolve, reject) => {\r\n    const url = `http://restapi.amap.com/v3/weather/weatherInfo?key=98c97d10c1fda37bdc5402d15c1cdd71&city=${city}`;\r\n    jsonp(url, {}, (err, data) => {\r\n      //   console.log(err, data);\r\n      if (!err && data.status === \"1\") {\r\n        const { weather } = data.lives[0];\r\n        resolve({ weather });\r\n      } else {\r\n        message.error(\"天气获取失败\");\r\n      }\r\n    });\r\n  });\r\n};\r\n// 获取一级二级分类列表\r\nexport const reqCategorys = (parentId) =>\r\n  ajax(\"/manage/category/list\", { parentId });\r\n// reqWeather(\"北京\");\r\nexport const reqAddCategory = (categoryName, parentId) =>\r\n  ajax(\"/manage/category/add\", { categoryName, parentId }, \"post\");\r\n\r\nexport const reqUpdateCategory = (categoryId, categoryName) =>\r\n  ajax(\"/manage/category/update\", { categoryId, categoryName }, \"post\");\r\n\r\nexport const reqProducts = (pageNum, pageSize) =>\r\n  ajax(\r\n    `http://120.55.193.14:5000/manage/product/list?pageNum=${pageNum}&pageSize=${pageSize}`\r\n  );\r\n/* 搜索商品分页列表,或者根据商品描述，或者商品名称 */\r\nexport const reqProductsSearch = ( pageNum, pageSize , searchName,searchType) =>\r\n  ajax(\r\n    'http://120.55.193.14:5000/manage/product/search',\r\n    { pageNum, pageSize, [searchType]:searchName }\r\n  );\r\n\r\n  /* 获取一个分类 */\r\n  export const reqCategory = (categoryId) => ajax('http://120.55.193.14:5000/manage/category/info',{categoryId})\r\n  /* 更新商品的状态(上/下) */\r\n  export const reqUpdateStatus = (productId,status) => ajax('http://120.55.193.14:5000/manage/product/updateStatus',{productId,status},'post')\r\n  \r\n  //添加商品\r\n  export const reqAddProduct = (categoryId,pCategoryId,name,price,desc) => ajax('http://120.55.193.14:5000//manage/product/add',{categoryId,pCategoryId,name,price,desc},'post')\r\n  \r\n  //删除指定名称的图片\r\n  export const reqDelImg = (name) => ajax('http://120.55.193.14:5000/manage/img/delete',{name},'post')\r\n  //更新商品\r\n  export const reqUpdateProduct = (_id,categoryId,pCategoryId,name,price,desc) => ajax('http://120.55.193.14:5000//manage/product/update',{categoryId,pCategoryId,name,price,desc,_id},'post')"]},"metadata":{},"sourceType":"module"}