{"ast":null,"code":"import \"antd/es/card/style/css\";\nimport _Card from \"antd/es/card\";\nimport \"antd/es/modal/style/css\";\nimport _Modal from \"antd/es/modal\";\nimport \"antd/es/table/style/css\";\nimport _Table from \"antd/es/table\";\nimport \"antd/es/button/style/css\";\nimport _Button from \"antd/es/button\";\nimport \"antd/es/message/style/css\";\nimport _message from \"antd/es/message\";\nvar _jsxFileName = \"D:\\\\desk\\\\\\u5C1A\\u7845\\u8C37React\\u5168\\u6808\\u9879\\u76EE\\u3010\\u8C37\\u7C92\\u540E\\u53F0\\u3011\\u6559\\u7A0B\\\\React-admin\\\\src\\\\pages\\\\role\\\\index.jsx\";\nimport React, { Component } from \"react\";\nimport { connect } from 'react-redux';\nimport { PAGE_SIZE } from \"../../utils/constant\";\nimport { reqRoleList, reqAddRole, reqUpdateRole } from \"../../api\";\nimport AddForm from \"./add-form.jsx\";\nimport SetTree from \"./setTree\"; // import memoryUtils from '../../utils/memoryUtils'\n\nimport { formateDate } from '../../utils/dataUtils';\nimport storageUtils from \"../../utils/storageUtils\";\nimport { logout } from \"../../redux/actions\";\n/* 角色路由 */\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Role extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: false,\n      roles: [],\n      role: {},\n      showStatus: 0\n    };\n\n    this.getRoles = async () => {\n      const result = await reqRoleList();\n\n      if (result.status === 0) {\n        const roles = result.data;\n        this.setState({\n          roles\n        });\n      }\n    };\n\n    this.initColumn = () => {\n      this.columns = [{\n        title: \"角色名称\",\n        dataIndex: \"name\"\n      }, {\n        title: \"创建时间\",\n        dataIndex: \"create_time\",\n        render: create_time => formateDate(create_time)\n      }, {\n        title: \"授权时间\",\n        dataIndex: \"auth_time\",\n        render: auth_time => formateDate(auth_time)\n      }, {\n        title: \"授权人\",\n        dataIndex: \"auth_name\"\n      }];\n    };\n\n    this.handleCancel = () => {\n      this.setState({\n        showStatus: 0\n      });\n    };\n\n    this.addRole = async () => {\n      const result = await reqAddRole(this.input.props.value);\n\n      if (result.status === 0) {\n        _message.success(\"添加角色成功\"); // this.getRoles()\n        // 可以不请求直接添加到roles列表\n\n\n        const role = result.data; // const roles =[...this.state.roles]\n        // roles.push(role)\n        // this.setState({roles:roles})\n\n        this.setState(state => ({\n          roles: [...state.roles, role]\n        }));\n      } else {\n        _message.error(\"添加角色失败\");\n      }\n\n      this.setState({\n        showStatus: 0\n      });\n    };\n\n    this.setRole = async () => {\n      //   console.log('select',select)\n      const menus = this.auth.current.getMenus();\n      const role = this.state.role;\n      role.menus = menus;\n      role.auth_time = Date.now();\n      role.auth_name = this.props.user.username; //  console.log(role)\n\n      const result = await reqUpdateRole(role);\n\n      if (result.status === 0) {\n        _message.success('设置权限成功'); //如果更新的是自己角色权限,强制退出\n\n\n        if (this.props.user.username !== 'admin' && role._id === this.props.user.role_id) {\n          this.props.logout();\n          this.props.history.replace('./login');\n\n          _message.info('权限已更改,请重新登录');\n        }\n      } else {\n        _message.error('设置权限失败');\n      }\n\n      this.setState({\n        showStatus: 0\n      });\n    };\n\n    this.auth = /*#__PURE__*/React.createRef();\n  }\n\n  componentDidMount() {\n    this.getRoles();\n  }\n\n  UNSAFE_componentWillMount() {\n    this.initColumn();\n  }\n\n  render() {\n    const {\n      roles,\n      role,\n      showStatus\n    } = this.state;\n\n    const title = /*#__PURE__*/_jsxDEV(\"span\", {\n      children: [/*#__PURE__*/_jsxDEV(_Button, {\n        type: \"primary\",\n        onClick: () => this.setState({\n          showStatus: 1\n        }),\n        children: \"\\u521B\\u5EFA\\u89D2\\u8272\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(_Button, {\n        type: \"primary\",\n        onClick: () => this.setState({\n          showStatus: 2\n        }),\n        disabled: !role._id,\n        children: \"\\u8BBE\\u7F6E\\u89D2\\u8272\\u6743\\u9650\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }, this); // console.log(roles)\n    // console.log(this.columns)\n\n\n    return /*#__PURE__*/_jsxDEV(_Card, {\n      title: title,\n      children: [/*#__PURE__*/_jsxDEV(_Table, {\n        rowKey: \"_id\",\n        pagination: {\n          pageSize: PAGE_SIZE // , total: 50\n\n        },\n        dataSource: roles,\n        columns: this.columns,\n        loading: this.state.loading,\n        rowSelection: {\n          type: \"radio\",\n          selectedRowKeys: [role._id],\n          onSelect: role => {\n            this.setState({\n              role: role\n            });\n          }\n        } //设置单选\n        ,\n        onRow: role => {\n          return {\n            onSelect: event => {\n              this.setState({\n                role\n              });\n            },\n            onClick: event => {\n              this.setState({\n                role\n              });\n            },\n            // 点击行\n            onDoubleClick: event => {},\n            onContextMenu: event => {},\n            onMouseEnter: event => {},\n            // 鼠标移入行\n            onMouseLeave: event => {}\n          };\n        },\n        bordered: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(_Modal, {\n        title: \"\\u6DFB\\u52A0\\u89D2\\u8272\",\n        visible: showStatus === 1,\n        onOk: this.addRole,\n        onCancel: this.handleCancel,\n        destroyOnClose: true,\n        children: /*#__PURE__*/_jsxDEV(AddForm, {\n          categoryName: true,\n          setInput: input => {\n            this.input = input;\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(_Modal, {\n        title: \"\\u8BBE\\u7F6E\\u89D2\\u8272\\u6743\\u9650\",\n        visible: showStatus === 2,\n        onOk: this.setRole,\n        onCancel: this.handleCancel,\n        destroyOnClose: true,\n        children: /*#__PURE__*/_jsxDEV(SetTree, {\n          role: role,\n          ref: this.auth\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default connect(state => {\n  user: state.user;\n}, {})(Role);","map":{"version":3,"sources":["D:/desk/尚硅谷React全栈项目【谷粒后台】教程/React-admin/src/pages/role/index.jsx"],"names":["React","Component","connect","PAGE_SIZE","reqRoleList","reqAddRole","reqUpdateRole","AddForm","SetTree","formateDate","storageUtils","logout","Role","constructor","props","state","loading","roles","role","showStatus","getRoles","result","status","data","setState","initColumn","columns","title","dataIndex","render","create_time","auth_time","handleCancel","addRole","input","value","success","error","setRole","menus","auth","current","getMenus","Date","now","auth_name","user","username","_id","role_id","history","replace","info","createRef","componentDidMount","UNSAFE_componentWillMount","pageSize","type","selectedRowKeys","onSelect","event","onClick","onDoubleClick","onContextMenu","onMouseEnter","onMouseLeave"],"mappings":"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","sourcesContent":["import React, { Component, } from \"react\";\r\nimport { connect } from 'react-redux'\r\n\r\nimport { Card, Button, Table, Modal, message } from \"antd\";\r\nimport { PAGE_SIZE } from \"../../utils/constant\";\r\nimport { reqRoleList, reqAddRole ,reqUpdateRole} from \"../../api\";\r\nimport AddForm from \"./add-form.jsx\";\r\nimport SetTree from \"./setTree\";\r\n// import memoryUtils from '../../utils/memoryUtils'\r\nimport {formateDate} from '../../utils/dataUtils'\r\nimport storageUtils from \"../../utils/storageUtils\";\r\nimport { logout } from \"../../redux/actions\";\r\n/* 角色路由 */\r\n class Role extends Component {\r\n  state = {\r\n    loading: false,\r\n    roles: [],\r\n    role: {},\r\n    showStatus: 0,\r\n  };\r\n  constructor(props){\r\n      super(props)\r\n      this.auth= React.createRef()\r\n  }\r\n  getRoles = async () => {\r\n    const result = await reqRoleList();\r\n    if (result.status === 0) {\r\n      const roles = result.data;\r\n      this.setState({\r\n        roles,\r\n      });\r\n    }\r\n  };\r\n  initColumn = () => {\r\n    this.columns = [\r\n      {\r\n        title: \"角色名称\",\r\n        dataIndex: \"name\",\r\n      },\r\n      {\r\n        title: \"创建时间\",\r\n        dataIndex: \"create_time\",\r\n        render:(create_time)=>formateDate(create_time)\r\n      },\r\n      {\r\n        title: \"授权时间\",\r\n        dataIndex: \"auth_time\",\r\n        render:(auth_time)=>formateDate(auth_time)\r\n      },\r\n      {\r\n        title: \"授权人\",\r\n        dataIndex: \"auth_name\",\r\n      },\r\n    ];\r\n  };\r\n  handleCancel = () => {\r\n    this.setState({ showStatus: 0 });\r\n  };\r\n  addRole = async () => {\r\n    const result = await reqAddRole(this.input.props.value);\r\n    if (result.status === 0) {\r\n      message.success(\"添加角色成功\");\r\n      // this.getRoles()\r\n      // 可以不请求直接添加到roles列表\r\n      const role = result.data;\r\n      // const roles =[...this.state.roles]\r\n      // roles.push(role)\r\n      // this.setState({roles:roles})\r\n      this.setState((state) => ({\r\n        roles: [...state.roles, role],\r\n      }));\r\n    } else {\r\n      message.error(\"添加角色失败\");\r\n    }\r\n    this.setState({ showStatus: 0 });\r\n  };\r\n  setRole = async() => {\r\n    //   console.log('select',select)\r\n     const menus =  this.auth.current.getMenus()\r\n     const role = this.state.role\r\n     role.menus=menus\r\n     role.auth_time = Date.now()\r\n     role.auth_name = this.props.user.username\r\n    //  console.log(role)\r\n     const result = await reqUpdateRole(role)\r\n     if(result.status===0){\r\n         message.success('设置权限成功')\r\n         //如果更新的是自己角色权限,强制退出\r\n        if(this.props.user.username!=='admin'&&role._id===this.props.user.role_id){\r\n          this.props.logout()\r\n          this.props.history.replace('./login')\r\n          message.info('权限已更改,请重新登录')\r\n        }\r\n     }else{\r\n         message.error('设置权限失败')\r\n     }\r\n    this.setState({ showStatus: 0 });\r\n  };\r\n  componentDidMount() {\r\n    this.getRoles();\r\n  }\r\n  UNSAFE_componentWillMount() {\r\n    this.initColumn();\r\n  }\r\n  render() {\r\n    const { roles, role, showStatus } = this.state;\r\n    const title = (\r\n      <span>\r\n        <Button type=\"primary\" onClick={() => this.setState({ showStatus: 1 })}>\r\n          创建角色\r\n        </Button>\r\n        <Button\r\n          type=\"primary\"\r\n          onClick={() => this.setState({ showStatus: 2 })}\r\n          disabled={!role._id}\r\n        >\r\n          设置角色权限\r\n        </Button>\r\n      </span>\r\n    );\r\n\r\n    // console.log(roles)\r\n    // console.log(this.columns)\r\n    return (\r\n      <Card title={title}>\r\n        <Table\r\n          rowKey=\"_id\"\r\n          pagination={{\r\n            pageSize: PAGE_SIZE,\r\n            // , total: 50\r\n          }}\r\n          dataSource={roles}\r\n          columns={this.columns}\r\n          loading={this.state.loading}\r\n          rowSelection={{ type: \"radio\", selectedRowKeys: [role._id],onSelect:(role)=>{\r\n            this.setState({role:role})} \r\n          }} //设置单选\r\n          onRow={(role) => {\r\n            return {\r\n              onSelect:(event) => {\r\n                this.setState({ role });\r\n              },\r\n              onClick: (event) => {\r\n                this.setState({ role });\r\n              }, // 点击行\r\n              onDoubleClick: (event) => {},\r\n              onContextMenu: (event) => {},\r\n              onMouseEnter: (event) => {}, // 鼠标移入行\r\n              onMouseLeave: (event) => {},\r\n            };\r\n          }}\r\n          bordered\r\n        />\r\n        <Modal\r\n          title=\"添加角色\"\r\n          visible={showStatus === 1}\r\n          onOk={this.addRole}\r\n          onCancel={this.handleCancel}\r\n          destroyOnClose={true}\r\n        >\r\n          <AddForm\r\n            categoryName\r\n            setInput={(input) => {\r\n              this.input = input;\r\n            }}\r\n          />\r\n        </Modal>\r\n        <Modal\r\n          title=\"设置角色权限\"\r\n          visible={showStatus === 2}\r\n          onOk={this.setRole}\r\n          onCancel={this.handleCancel}\r\n          destroyOnClose={true}\r\n        >\r\n          <SetTree role={role} ref={this.auth}/>\r\n        </Modal>\r\n      </Card>\r\n    );\r\n  }\r\n}\r\nexport default connect(state=>{user:state.user},{})(Role)"]},"metadata":{},"sourceType":"module"}