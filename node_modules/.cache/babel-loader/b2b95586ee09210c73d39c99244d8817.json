{"ast":null,"code":"import \"antd/es/message/style/css\";\nimport _message from \"antd/es/message\";\nimport ajax from \"./ajax.jsx\";\nimport jsonp from \"jsonp\"; // 包含应用中所有接口请求函数的模块\n// 要求:能根据接口文档定义接口请求\n// 每个函数的返回值都是promise\n//登陆\n\nexport const reqLogin = (username, password) => ajax(\"/login\", {\n  username,\n  password\n}, \"POST\");\nexport const reqAddUser = user => ajax(\"/manage/user/add\", user, \"POST\");\n/* jsonp请求的接口请求函数 */\n\nexport const reqWeather = city => {\n  return new Promise((resolve, reject) => {\n    const url = `http://restapi.amap.com/v3/weather/weatherInfo?key=98c97d10c1fda37bdc5402d15c1cdd71&city=${city}`;\n    jsonp(url, {}, (err, data) => {\n      //   console.log(err, data);\n      if (!err && data.status === \"1\") {\n        const {\n          weather\n        } = data.lives[0];\n        resolve({\n          weather\n        });\n      } else {\n        _message.error('天气获取失败');\n      }\n    });\n  });\n}; // reqWeather(\"北京\");","map":{"version":3,"sources":["D:/desk/尚硅谷React全栈项目【谷粒后台】教程/React-admin/src/api/index.js"],"names":["ajax","jsonp","reqLogin","username","password","reqAddUser","user","reqWeather","city","Promise","resolve","reject","url","err","data","status","weather","lives","error"],"mappings":";;AAEA,OAAOA,IAAP,MAAiB,YAAjB;AACA,OAAOC,KAAP,MAAkB,OAAlB,C,CACA;AACA;AACA;AAEA;;AAEA,OAAO,MAAMC,QAAQ,GAAG,CAACC,QAAD,EAAWC,QAAX,KACtBJ,IAAI,CAAC,QAAD,EAAW;AAAEG,EAAAA,QAAF;AAAYC,EAAAA;AAAZ,CAAX,EAAmC,MAAnC,CADC;AAGP,OAAO,MAAMC,UAAU,GAAIC,IAAD,IAAUN,IAAI,CAAC,kBAAD,EAAqBM,IAArB,EAA2B,MAA3B,CAAjC;AAEP;;AACA,OAAO,MAAMC,UAAU,GAAIC,IAAD,IAAU;AAClC,SAAO,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACtC,UAAMC,GAAG,GAAI,4FAA2FJ,IAAK,EAA7G;AACAP,IAAAA,KAAK,CAACW,GAAD,EAAM,EAAN,EAAU,CAACC,GAAD,EAAMC,IAAN,KAAe;AAC9B;AACE,UAAI,CAACD,GAAD,IAAQC,IAAI,CAACC,MAAL,KAAgB,GAA5B,EAAiC;AAC/B,cAAM;AAAGC,UAAAA;AAAH,YAAeF,IAAI,CAACG,KAAL,CAAW,CAAX,CAArB;AACAP,QAAAA,OAAO,CAAC;AAAEM,UAAAA;AAAF,SAAD,CAAP;AACD,OAHD,MAGK;AACD,iBAAQE,KAAR,CAAc,QAAd;AACH;AACF,KARI,CAAL;AASD,GAXM,CAAP;AAYD,CAbM,C,CAeP","sourcesContent":["// import json from jsonp\r\nimport {message} from 'antd'\r\nimport ajax from \"./ajax.jsx\";\r\nimport jsonp from \"jsonp\";\r\n// 包含应用中所有接口请求函数的模块\r\n// 要求:能根据接口文档定义接口请求\r\n// 每个函数的返回值都是promise\r\n\r\n//登陆\r\n\r\nexport const reqLogin = (username, password) =>\r\n  ajax(\"/login\", { username, password }, \"POST\");\r\n\r\nexport const reqAddUser = (user) => ajax(\"/manage/user/add\", user, \"POST\");\r\n\r\n/* jsonp请求的接口请求函数 */\r\nexport const reqWeather = (city) => {\r\n  return new Promise((resolve, reject) => {\r\n    const url = `http://restapi.amap.com/v3/weather/weatherInfo?key=98c97d10c1fda37bdc5402d15c1cdd71&city=${city}`;\r\n    jsonp(url, {}, (err, data) => {\r\n    //   console.log(err, data);\r\n      if (!err && data.status === \"1\") {\r\n        const {  weather } = data.lives[0];\r\n        resolve({ weather});\r\n      }else{\r\n          message.error('天气获取失败')\r\n      }\r\n    });\r\n  });\r\n};\r\n\r\n// reqWeather(\"北京\");\r\n"]},"metadata":{},"sourceType":"module"}